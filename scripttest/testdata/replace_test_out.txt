set max_line_width 200;
OK

replaceTopic := (kafka in partitions = 10)
-> (project key,  replace(json_string("v4",val), "foobar", "BARFOO") as replaced)
-> (store stream);
OK

--produce data dataset_replace;

(scan all from replaceTopic) -> (sort by key);
+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| offset               | event_time                 | key                                                                    | replaced                                                               |
+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| 0                    | 2006-01-02 15:04:05.000000 | key01                                                                  | BARFOO01                                                               |
| 0                    | 2006-01-02 15:05:05.000000 | key02                                                                  | BARFOO02                                                               |
| 0                    | 2006-01-02 15:06:05.000000 | key03                                                                  | BARFOO03                                                               |
| 0                    | 2006-01-02 15:07:05.000000 | key04                                                                  | BARFOO04                                                               |
| 0                    | 2006-01-02 15:08:05.000000 | key05                                                                  | BARFOO05                                                               |
| 1                    | 2006-01-02 15:09:05.000000 | key06                                                                  | BARFOO06                                                               |
| 1                    | 2006-01-02 15:10:05.000000 | key07                                                                  | BARFOO07                                                               |
| 1                    | 2006-01-02 15:11:05.000000 | key08                                                                  | BARFOO08                                                               |
| 0                    | 2006-01-02 15:12:05.000000 | key09                                                                  | BARFOO09                                                               |
| 2                    | 2006-01-02 15:13:05.000000 | key10                                                                  | BARFOO10                                                               |
+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
10 rows returned

delete(replaceTopic);
OK
